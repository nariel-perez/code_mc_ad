rm -f *.o *.mod

# Flags de compilaciÃ³n
FFLAGS="-O3 -mcmodel=medium -Wall -Wextra -Wunused -Wconversion"

######################
############ PROCESADO
#si o si primero (orden de dependencias: PBC_Mod -> GeomUtils -> InputParams)

gfortran $FFLAGS -c PBC_Mod.f90
gfortran $FFLAGS -c GeomUtils.f90
gfortran $FFLAGS -c InputParams.f90
gfortran $FFLAGS -c AdsorbateInput.f90
gfortran $FFLAGS -c SimulationData.f90
gfortran $FFLAGS -c ConstantsModule.f90
gfortran $FFLAGS -c RotationModule.f90

#########
#Lectura de estrucuturas y calculo de potenciales
gfortran $FFLAGS -c PotencialFF.f90
gfortran $FFLAGS -c Potencial.f90
gfortran $FFLAGS -c Estructura.f90
gfortran $FFLAGS -c estadistica.f90

#########
###bloque In
gfortran $FFLAGS -c In.f90
gfortran $FFLAGS -c Adpotin.f90
gfortran $FFLAGS -c Potin.f90
gfortran $FFLAGS -c Add.f90

#########
### bloque out
gfortran $FFLAGS -c Out.f90
gfortran $FFLAGS -c Potout.f90
gfortran $FFLAGS -c Adpotout.f90
gfortran $FFLAGS -c Remove.f90

########
##### other (MC)
gfortran $FFLAGS -c Move.f90
gfortran $FFLAGS -c change.f90
gfortran $FFLAGS -c Ranf.f90

########
###main...
gfortran $FFLAGS -c Main.f90

######
###compilacion 
# Link all compiled object files into the final executable
gfortran $FFLAGS -o simulation.exe \
    PBC_Mod.o GeomUtils.o InputParams.o AdsorbateInput.o ConstantsModule.o SimulationData.o RotationModule.o \
    Add.o Adpotin.o Adpotout.o change.o estadistica.o \
    Estructura.o In.o Main.o Move.o Out.o Potencial.o PotencialFF.o \
    Potin.o Potout.o Ranf.o Remove.o

# Remove object and module files after successful compilation
rm -f *.o *.mod
